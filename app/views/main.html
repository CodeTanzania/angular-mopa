<div class="dashhead">
  <div class="dashhead-titles">
    <h6 class="dashhead-subtitle">SMART DAWASCO</h6>
    <h2 class="dashhead-title">Customer Report List</h2>
    <hr>
  </div>
</div>

<div class="tb-body">
  <div class="form-inline dt-bootstrap">
    <form class="form-inline" ng-submit="update()">
     <div class="form-group">
        <div class="input-group">
          <div class="input-group-addon"><span class="icon icon-refresh" aria-hidden="true" ng-click="refresh()"></span></div>
          <input type="search" class="form-control" placeholder="Search" ng-model="reportSearch.query">
        </div>
      </div>
     <div class="form-group">
        <select class="form-control" ng-model="reportSearch.field" ng-change="if(reportSearch.query){update()}">
          <option value="service_request_id">Report ID</option>
          <option value="phone">Phone Number</option>
        </select>
      </div>
     <div class="form-group">
        <button class="btn btn-primary"><span class="icon icon-search" aria-hidden="true"></span> Search</button>
      </div>
     <div class="form-group">
        <label>Results per page</label>
        <input type="number" class="form-control" ng-model="reportSearch.limit" ng-change='update()'>
      </div>
    </form>
    <hr>

    <div class="row"><div class="col-sm-12 table-responsive">
      <table id="example" class="table table-striped table-hover" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th class='header'>Id</th>
            <th class='header'>Date</th>
            <th class='header'>Phone</th>
            <th class='header'>Area</th>
            <th class='header'>Category</th>
            <th class='header'>Status</th>
            <th class='header'>Assigned to</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="report in reports" ngclick="openReport(report.service_request_id)">
            <td><a ng-href="#/report/{{ report.service_request_id }}" class="text-muted">{{ report.service_request_id }}</a></td>
            <td><a ng-href="#/report/{{ report.service_request_id }}" class="text-muted"><small>{{ report.requested_datetime|date:'short' }}</small></a></td>
            <td><a ng-href="#/report/{{ report.service_request_id }}" class="text-muted">{{ report.phone }}</a></td>
            <td><a ng-href="#/report/{{ report.service_request_id }}" class="text-muted">{{ report.agency_responsible }}</a></td>
            <td><a ng-href="#/report/{{ report.service_request_id }}" class="text-muted">{{ report.service_name }}</a></td>
            <td><a ng-href="#/report/{{ report.service_request_id }}" class="text-muted"><button type="button" class="btn btn-sm btn-{{report.service_notice === 'Completed' ? 'success' : (report.service_notice === 'Open' ? 'danger' : 'warning')}}">{{ report.service_notice }}</button></a></td>
            <td><a ng-href="#/report/{{ report.service_request_id }}" class="text-muted">{{ report.assigned_to }}</a></td>
          </tr>
        </tbody>
      </table>
      <div class="text-center text-warning">{{ pageStatusMessage }}</div>
    </div>

  </div>

</div>

</div>
